"use strict";if($(".content-wrapper").find("#user-create").length){$((function(){$(".select2").select2({})}));var hasPhoneError=!1,hasEmailError=!1;function enableDisableButton(){hasPhoneError||hasEmailError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}function updatePhoneInfo(){let promiseObj;return new Promise((function(resolve,reject){$("#defaultCountry").val($("#phone").intlTelInput("getSelectedCountryData").iso2),$("#carrierCode").val($("#phone").intlTelInput("getSelectedCountryData").dialCode),""!=$("#phone").val&&$("#formattedPhone").val($("#phone").intlTelInput("getNumber").replace(/-|\s/g,"")),resolve()}))}function checkDuplicatePhoneNumber(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:ADMIN_URL+"/duplicate-phone-number-check",dataType:"json",cache:!1,data:{phone:$.trim($("#phone").val()),carrierCode:$.trim($("#phone").intlTelInput("getSelectedCountryData").dialCode)}}).done((function(response){response.status?($("#duplicate-phone-error").show().addClass("error").html(response.fail),hasPhoneError=!0,enableDisableButton()):($("#duplicate-phone-error").html(""),hasPhoneError=!1,enableDisableButton())}))}function validateInternaltionalPhoneNumber(){let promiseObj;return new Promise((function(resolve,reject){let resolveStatus=!1;""!==$.trim($("#phone").val())?$("#phone").intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($("#phone").val()))?(resolveStatus=!0,$("#tel-error").html(""),hasPhoneError=!1,enableDisableButton()):($("#duplicate-phone-error").html(""),$("#tel-error").addClass("error").html(validPhoneNumberErrorText),hasPhoneError=!0,enableDisableButton()):($("#tel-error").html(""),hasPhoneError=!1,enableDisableButton()),resolve(resolveStatus)}))}function phoneValidityCheck(){updatePhoneInfo().then(()=>{validateInternaltionalPhoneNumber().then(status=>{status&&checkDuplicatePhoneNumber()})})}$(document).on("submit","#user_form",(function(){$("#users_creat").attr("disabled",!0),$("#users_cancel").attr("disabled",!0),$(".fa-spin").removeClass("d-none"),$("#users_create_text").text(creatingText)})),$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:[countryShortCode],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",utilsScript:utilsScriptLoadingPath}),$("#phone").on("countrychange",(function(){phoneValidityCheck()})),$("#phone").on("blur",(function(){phoneValidityCheck()})),$(document).ready((function(){$("#email").on("blur",(function(e){var email=$("#email").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:ADMIN_URL+"/email_check",dataType:"json",data:{email:email}}).done((function(response){function validateEmail(email){var re;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}function emptyEmail(){0===email.length&&($("#email_error").html(""),$("#email_ok").html(""))}response.status?(emptyEmail(),validateEmail(email)?($("#email_error").addClass("error").html(response.fail).css("font-weight","bold"),$("#email_ok").html(""),hasEmailError=!0,enableDisableButton()):$("#email_error").html("")):(emptyEmail(),validateEmail(email)?$("#email_error").html(""):$("#email_ok").html(""),hasEmailError=!1,enableDisableButton())}))}))}))}if($(".content-wrapper").find("#user-edit").length){var hasPhoneError=!1,hasEmailError=!1;function enableDisableButton(){hasPhoneError||hasEmailError?$("form").find("button[type='submit']").prop("disabled",!0):$("form").find("button[type='submit']").prop("disabled",!1)}function updatePhoneInfo(){let promiseObj;return new Promise((function(resolve,reject){$("#defaultCountry").val($("#phone").intlTelInput("getSelectedCountryData").iso2),$("#carrierCode").val($("#phone").intlTelInput("getSelectedCountryData").dialCode),""!=$("#phone").val&&$("#formattedPhone").val($("#phone").intlTelInput("getNumber").replace(/-|\s/g,"")),resolve()}))}function checkDuplicatePhoneNumber(){$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:ADMIN_URL+"/duplicate-phone-number-check",dataType:"json",cache:!1,data:{phone:$.trim($("#phone").val()),carrierCode:$.trim($("#phone").intlTelInput("getSelectedCountryData").dialCode),id:$("#id").val()}}).done((function(response){response.status?($("#duplicate-phone-error").show().addClass("error").html(response.fail),hasPhoneError=!0,enableDisableButton()):($("#duplicate-phone-error").html(""),hasPhoneError=!1,enableDisableButton())}))}function validateInternaltionalPhoneNumber(){let promiseObj;return new Promise((function(resolve,reject){let resolveStatus=!1;""!==$.trim($("#phone").val())?$("#phone").intlTelInput("isValidNumber")&&isValidPhoneNumber($.trim($("#phone").val()))?(resolveStatus=!0,$("#tel-error").html(""),hasPhoneError=!1,enableDisableButton()):($("#duplicate-phone-error").html(""),$("#tel-error").addClass("error").html(validPhoneNumberErrorText),hasPhoneError=!0,enableDisableButton()):($("#tel-error").html(""),hasPhoneError=!1,enableDisableButton()),resolve(resolveStatus)}))}function phoneValidityCheck(){updatePhoneInfo().then(()=>{validateInternaltionalPhoneNumber().then(status=>{status&&checkDuplicatePhoneNumber()})})}$((function(){$(".select2").select2({})})),$("#phone").intlTelInput({separateDialCode:!0,nationalMode:!0,preferredCountries:["us"],autoPlaceholder:"polite",placeholderNumberType:"MOBILE",formatOnDisplay:!1,utilsScript:utilsScriptLoadingPath}),null!==formattedPhoneNumber&&null!==carrierCode&&null!==defaultCountry&&($("#phone").intlTelInput("setNumber",formattedPhoneNumber),$("#user_defaultCountry").val(defaultCountry),$("#user_carrierCode").val(carrierCode)),$("#phone").on("countrychange",(function(){phoneValidityCheck()})),$("#phone").on("blur",(function(){phoneValidityCheck()})),$(document).ready((function(){$("#email").on("input",(function(e){var email=$(this).val(),id=$("#id").val();$.ajax({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},method:"POST",url:ADMIN_URL+"/email_check",dataType:"json",data:{email:email,user_id:id}}).done((function(response){function validateEmail(email){var re;return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(email)}function emptyEmail(email){0===email.length&&($("#emailError").html(""),$("#email-ok").html(""))}emptyEmail(email),response.status?validateEmail(email)?($("#emailError").addClass("error").html(response.fail).css("font-weight","bold"),$("#email-ok").html(""),hasEmailError=!0,enableDisableButton()):$("#emailError").html(""):(hasEmailError=!1,enableDisableButton(),validateEmail(email)?$("#emailError").html(""):$("#email-ok").html(""))}))}))})),$(document).on("change","#status",(function(){let status=$("#status").val();"Inactive"==status?$("#user-status").text(inactiveWarning):"Suspended"==status?$("#user-status").text(suspendWarning):$("#user-status").text("")})),$(document).on("submit","#user_form",(function(){$("#users_edit").attr("disabled",!0),$("#users_cancel").attr("disabled",!0),$(".fa-spin").removeClass("d-none"),$("#users_edit_text").text(updatingText)}))}